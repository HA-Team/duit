const app=angular.module('duit',['ui.router','infinite-scroll','angular-google-analytics']);app.config(function(d,a,b){a.otherwise('/'),d.state('home',{url:'/',templateUrl:'/views/home/home.html'}),d.state('propertySearch',{url:'/propertySearch?args',templateUrl:'/views/properties_listing/properties_listing.html',reloadOnSearch:!1}),d.state('contactUs',{url:'/contactUs',templateUrl:'/views/contact/contact.html'}),d.state('property',{url:'/property/:propertyId',templateUrl:'/views/property/property.html'}),d.state('agents',{url:'/agents',templateUrl:'/views/agents/agents.html'}),d.state('developments',{url:'/developments',templateUrl:'/views/developments_listing/developments_listing.html'}),d.state('development',{url:'/development/:devId',templateUrl:'/views/development/development.html'}),d.state('favorites',{url:'/favorites',templateUrl:'/views/favorites/favorites.html'}),d.state('login',{url:'/login',templateUrl:'/views/accounts/login.html'}),b.decorator('$uiViewScroll',function(){return function(){window.scrollTo(0,0)}})}),app.config(['AnalyticsProvider',function(b){b.setAccount('UA-79529729-2')}]).run(['Analytics',function(){}]),app.service('tokkoApi',function(){const h={key:'f26431aec0277d4e7912e2709af35707fb9362e6',lang:'es_ar'},a=function(d,a){let b=new XMLHttpRequest;b.onreadystatechange=function(){4==b.readyState&&200==b.status&&a(b.responseText)},b.open('GET',d,!0),b.send(null)};return{find:function(b,c,g){let e='https://tokkobroker.com/api/v1/'+b+'/?format=json&';if('object'==typeof c)for(let a in c)e+=a+'='+c[a]+'&';else e+='id='+c+'&';a(e+'key='+h.key+'&lang='+h.lang,function(c){'property/get_search_summary'===b?g(JSON.parse(c)):g(JSON.parse(c).objects)})},findOne:function(d,a,b){this.find(d,a,function(c){b(c[0])})},insert:function(a,b,c){let d=new XMLHttpRequest,e='https://tokkobroker.com/api/v1/'+a+'/?key='+h.key,f=JSON.stringify(b);d.open('POST',e,!0),d.setRequestHeader('Content-type','application/json'),d.onreadystatechange=function(){4==d.readyState&&(200==d.status||201==d.status)?c({result:'success',status:d.status}):c({result:'error',status:d.status,result:d.responseText})},d.send(f)}}}),app.controller('startUp',function(c,d){d.Meteor=Meteor,FavoritesProps=new Meteor.Collection('favorites'),Meteor.subscribe('favorites'),d.favorites={dataLoaded:!1,props:[]},setTimeout(function(){uiFunctions.buildStickyHeader(),uiFunctions.buildTopBarMobileMenu()},0),d.isFavorite=(c)=>-1!==d.favorites.findIndex((a)=>a.id===c),Meteor.autorun(()=>{if(Meteor.user()){const b=FavoritesProps.find({users:Meteor.user()._id});if(b){let e=[];b.forEach((b)=>{e.push(b.prop)}),d.favorites.props=e,d.favorites.dataLoaded=!0,d.$apply()}}})});