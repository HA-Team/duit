const app=angular.module('duit',['ui.router','infinite-scroll','angular-google-analytics']);app.config(function(c,d,a){d.otherwise('/'),c.state('home',{url:'/',templateUrl:'/views/home/home.html'}),c.state('propertySearch',{url:'/propertySearch?args',templateUrl:'/views/properties_listing/properties_listing.html',reloadOnSearch:!1}),c.state('contactUs',{url:'/contactUs',templateUrl:'/views/contact/contact.html'}),c.state('property',{url:'/property/:propertyId',templateUrl:'/views/property/property.html'}),c.state('agents',{url:'/agents',templateUrl:'/views/agents/agents.html'}),c.state('developments',{url:'/developments',templateUrl:'/views/developments_listing/developments_listing.html'}),c.state('development',{url:'/development/:devId',templateUrl:'/views/development/development.html'}),c.state('favorites',{url:'/favorites',templateUrl:'/views/favorites/favorites.html'}),c.state('login',{url:'/login',templateUrl:'/views/accounts/login.html'}),a.decorator('$uiViewScroll',function(){return function(){window.scrollTo(0,0)}})}),app.config(['AnalyticsProvider',function(a){a.setAccount('UA-79529729-2')}]).run(['Analytics',function(){}]),app.service('tokkoApi',function(){const i={key:'f26431aec0277d4e7912e2709af35707fb9362e6',lang:'es_ar'},d=function(c,d){let a=new XMLHttpRequest;a.onreadystatechange=function(){4==a.readyState&&200==a.status&&d(a.responseText)},a.open('GET',c,!0),a.send(null)};return{find:function(a,b,f){let g='https://tokkobroker.com/api/v1/'+a+'/?format=json&';if('object'==typeof b)for(let c in b)g+=c+'='+b[c]+'&';else g+='id='+b+'&';d(g+'key='+i.key+'&lang='+i.lang,function(b){'property/get_search_summary'===a?f(JSON.parse(b)):f(JSON.parse(b).objects)})},findOne:function(c,d,a){this.find(c,d,function(b){a(b[0])})},insert:function(g,a,b){let c=new XMLHttpRequest,d='https://tokkobroker.com/api/v1/'+g+'/?key='+i.key,e=JSON.stringify(a);c.open('POST',d,!0),c.setRequestHeader('Content-type','application/json'),c.onreadystatechange=function(){4==c.readyState&&(200==c.status||201==c.status)?b({result:'success',status:c.status}):b({result:'error',status:c.status,result:c.responseText})},c.send(e)}}}),app.controller('startUp',function(a,f){f.Meteor=Meteor,FavoritesProps=new Meteor.Collection('favorites'),Meteor.subscribe('favorites'),f.favorites={dataLoaded:!1,props:[]},setTimeout(function(){uiFunctions.buildStickyHeader(),uiFunctions.buildTopBarMobileMenu()},0),f.isFavorite=(b)=>-1!==f.favorites.findIndex((c)=>c.id===b),Meteor.autorun(()=>{if(Meteor.user()){const a=FavoritesProps.find({users:Meteor.user()._id});if(a){let c=[];a.forEach((a)=>{c.push(a.prop)}),f.favorites.props=c,f.favorites.dataLoaded=!0,f.$apply()}}})});