const app=angular.module('duit',['ui.router','infinite-scroll','angular-google-analytics']);app.config(function(a,b,c){b.otherwise('/'),a.state('home',{url:'/',templateUrl:'/views/home/home.html'}),a.state('propertySearch',{url:'/propertySearch?args',templateUrl:'/views/properties_listing/properties_listing.html',reloadOnSearch:!1}),a.state('contactUs',{url:'/contactUs',templateUrl:'/views/contact/contact.html'}),a.state('property',{url:'/property/:propertyId',templateUrl:'/views/property/property.html'}),a.state('agents',{url:'/agents',templateUrl:'/views/agents/agents.html'}),a.state('developments',{url:'/developments',templateUrl:'/views/developments_listing/developments_listing.html'}),a.state('development',{url:'/development/:devId',templateUrl:'/views/development/development.html'}),a.state('favorites',{url:'/favorites',templateUrl:'/views/favorites/favorites.html'}),a.state('login',{url:'/login',templateUrl:'/views/accounts/login.html'}),c.decorator('$uiViewScroll',function(){return function(){window.scrollTo(0,0)}})}),app.config(['AnalyticsProvider',function(a){a.setAccount('UA-79529729-2')}]).run(['Analytics',function(){}]),app.service('tokkoApi',function(){const a={key:'f26431aec0277d4e7912e2709af35707fb9362e6',lang:'es_ar'},b=function(a,b){let c=new XMLHttpRequest;c.onreadystatechange=function(){4==c.readyState&&200==c.status&&b(c.responseText)},c.open('GET',a,!0),c.send(null)};return{find:function(c,d,e){let f='https://tokkobroker.com/api/v1/'+c+'/?format=json&';if('object'==typeof d)for(let b in d)f+=b+'='+d[b]+'&';else f+='id='+d+'&';b(f+'key='+a.key+'&lang='+a.lang,function(a){'property/get_search_summary'===c?e(JSON.parse(a)):e(JSON.parse(a).objects)})},findOne:function(a,b,c){this.find(a,b,function(a){c(a[0])})},insert:function(b,c,d){let e=new XMLHttpRequest,f='https://tokkobroker.com/api/v1/'+b+'/?key='+a.key,g=JSON.stringify(c);e.open('POST',f,!0),e.setRequestHeader('Content-type','application/json'),e.onreadystatechange=function(){4==e.readyState&&(200==e.status||201==e.status)?d({result:'success',status:e.status}):d({result:'error',status:e.status,result:e.responseText})},e.send(g)}}}),app.controller('startUp',function(a,b){b.Meteor=Meteor,FavoritesProps=new Meteor.Collection('favorites'),Meteor.subscribe('favorites'),b.favorites={dataLoaded:!1,props:[]},setTimeout(function(){uiFunctions.buildStickyHeader(),uiFunctions.buildTopBarMobileMenu()},0),b.isFavorite=(a)=>-1!==b.favorites.findIndex((b)=>b.id===a),Meteor.autorun(()=>{if(Meteor.user()){const a=FavoritesProps.find({users:Meteor.user()._id});if(a){let c=[];a.forEach((a)=>{c.push(a.prop)}),b.favorites.props=c,b.favorites.dataLoaded=!0,b.$apply()}}})});