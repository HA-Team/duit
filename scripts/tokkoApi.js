app.service('tokkoApi',function(){const h={key:'f26431aec0277d4e7912e2709af35707fb9362e6',lang:'es_ar'},c=function(b,c){let d=new XMLHttpRequest;d.onreadystatechange=function(){4==d.readyState&&200==d.status&&c(d.responseText)},d.open('GET',b,!0),d.send(null)};return{find:function(d,a,e){let f='http://tokkobroker.com/api/v1/'+d+'/?format=json&';if('object'==typeof a)for(let b in a)f+=b+'='+a[b]+'&';else f+='id='+a+'&';c(f+'key='+h.key+'&lang='+h.lang,function(a){'property/get_search_summary'===d?e(JSON.parse(a)):e(JSON.parse(a).objects)})},findOne:function(b,c,d){this.find(b,c,function(a){d(a[0])})},insert:function(f,g,a){let b=new XMLHttpRequest,c='http://tokkobroker.com/api/v1/'+f+'/?key='+h.key,d=JSON.stringify(g);b.open('POST',c,!0),b.setRequestHeader('Content-type','application/json'),b.onreadystatechange=function(){4==b.readyState&&(200==b.status||201==b.status)?a({result:'success',status:b.status}):a({result:'error',status:b.status,result:b.responseText})},b.send(d)}}});