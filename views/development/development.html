<div ng-controller="developmentController as development" class="hidden-on-mobile">

  <div class='spinner' ng-include="'/views/common/spinner.html'" ng-hide="development.apiReady"></div>

  <div id="titlebar" class="property-titlebar margin-bottom-0" ng-show="development.apiReady">

    <div class="container">
      <div class="row">
        <div class="col-md-12">
          
          <a onclick="window.history.back()" class="back-to-listings"></a>
          <div class="property-title">
            <h2>{{development.d.name}} <span class="property-badge">{{development.d.type.name}}</span></h2>
            <span>
              <a href="#location" class="listing-address">
                <i class="fa fa-map-marker"></i>
                {{development.d.address}}
              </a>
            </span>
          </div>
          <div class="property-pricing">
            <div class="sub-price">ID: {{development.d.reference_code}}</div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- Slider -->
  <div class="fullwidth-property-slider margin-bottom-50 hidden-on-desktop" ng-show="development.apiReady">
    <img ng-repeat="i in development.d.photos" src="{{i.image}}" class="margin-right-10">
  </div>

  <div class="margin-bottom-50 hidden-on-mobile">

    <!-- Slider Container -->
    <div class="property-slider-container">

      <!-- Slider -->
      <div class="property-slider no-arrows">

        <a  data-background-image="{{development.d.photos[0].original}}" class="item"></a>

        <!-- Slider Thumbs -->
        <ul class="proerty-gallery-thumbs-container" ng-if="development.d.photos.length <= 4">
          <li class="property-gallery-thumb" ng-repeat="i in development.d.photos">
            <a href="{{i.original}}" class="item mfp-gallery">
              <img src="{{i.thumb}}" alt="">
            </a>
          </li>
        </ul>

        <ul class="proerty-gallery-thumbs-container" ng-if="development.d.photos.length > 4">
          <li class="property-gallery-thumb">
            <a href="{{development.d.photos[0].original}}" class="item mfp-gallery">
              <img src="{{development.d.photos[0].thumb}}" alt="">
            </a>
          </li>
          <li class="property-gallery-thumb">
            <a href="{{development.d.photos[1].original}}" class="item mfp-gallery">
              <img src="{{development.d.photos[1].thumb}}" alt="">
            </a>
          </li>
          <li class="property-gallery-thumb">
            <a href="{{development.d.photos[2].original}}" class="item mfp-gallery">
              <img src="{{development.d.photos[2].thumb}}" alt="">
            </a>
          </li>
          <li class="property-gallery-thumb more">
            <a href="{{development.d.photos[3].original}}" class="item mfp-gallery">
              <span ><i class="fa fa-plus"></i> {{development.d.photos.length - 3}}</span>
            </a>
          </li>
          <li class="property-gallery-thumb hidden" ng-repeat="i in development.d.photos | limitTo: (4 - development.d.photos.length)">
            <a href="{{i.original}}" class="item mfp-gallery">
              <img src="{{i.thumb}}" alt="">
            </a>
          </li>
        </ul>

      </div>
      <!-- Slider End -->

    </div>
    <!-- Slider Container End -->

  </div>

  <div class="container" ng-show="development.apiReady">

    <div class="row">

      <!-- Property Description -->
      <div class="col-lg-8 col-md-7">

        <div class="property-description">

          <!-- Features -->
          <h3 class="desc-headline">Características</h3>
          <ul class="property-features checkboxes margin-top-0">
            <li ng-repeat="tag in development.d.tags">{{tag.name}}</li>
          </ul>

          <!-- Location -->
          <h3 class="desc-headline no-border" id="location">Ubicación</h3>
          <div id="propertyMap-container">
            <div id="propertyMap"></div>
          </div>

          <!-- Description -->
          <h3 class="desc-headline">Descripción</h3>
          <div class="show-more show-more-dev">
            <pre>{{development.d.description}}</pre>
            <a href="#" class="show-more-button" ng-click="development.toggleDescriptionDetailDesktop();">Mostrar Más <i class="fa fa-angle-down"></i></a>
          </div>

        </div>
      </div>
      <!-- Property Description End -->

      <!-- Sidebar -->
      <div class="col-lg-4 col-md-5">
        <div class="sidebar sticky right">

          <!-- Widget -->
          <div class="widget margin-bottom-30">
            <button class="widget-button"><i class="sl sl-icon-printer"></i> Imprimir</button>
          </div>

          <!-- Widget -->
          <div class="widget">

            <h3 class="margin-bottom-35">Destacados</h3>
            <div class='spinner' ng-include="'/views/common/spinner.html'" ng-hide="development.featuredPropsReady"></div>

            <div class="listing-carousel outer" ng-show="development.featuredPropsReady">

              <!-- Item -->
              <div class="item" ng-repeat="p in development.featuredProps">

                <div class="listing-item compact">
                  <a ui-sref="property({propertyId: p.id})" class="listing-img-container">

                    <div class="listing-badges">
                      <span class="featured">Destacado</span>
                      <span>{{p.type}}</span>
                    </div>

                    <div class="listing-img-content">
                      <span class="listing-compact-title">{{p.prop.publication_title}} <i ng-show="p.prop.web_price">{{ p.price | currency:p.currency:0}}</i></span>
                      <ul class="listing-hidden-content">
                        <li>Superficie <span>{{p.area}} M2</span></li>
                        <li><i class="fa fa-bed"></i> <span>{{p.prop.suite_amount}}</span></li>
                        <li><i class="fa fa-bathtub"></i> <span>{{p.prop.bathroom_amount}}</span></li>
                        <li><i class="fa fa-car"></i> <span>{{p.parkings}}</span></li>
                      </ul>
                    </div>

                    <img src="{{p.cover_photo}}" alt="">
                  </a>
                </div>

              </div>
              <!-- Item End -->

            </div>

          </div>
          <!-- Widget End -->

        </div>
      </div>
      <!-- Sidebar End -->

    </div>

    <div class="row">

      <div class="col-md-12">

        <!-- Similar Listings Container -->
        <h3 class="desc-headline no-border margin-bottom-35 margin-top-60">Propiedades en este Emprendimiento</h3>

        <!-- Layout Switcher -->
        <div class="layout-switcher hidden"><a href="#" class="list"><i class="fa fa-th-list"></i></a></div>

        <div class="listings-container list-layout">

          <div class='spinner' ng-include="'/views/common/spinner.html'" ng-hide="development.devPropsReady"></div>

          <!-- Listing Item -->
          <div class="listing-item" ng-repeat="p in development.devProps">

            <a ui-sref="property({propertyId: p.id})" class="listing-img-container">
              <div class="listing-badges">
                <span>{{p.type}}</span>
              </div>
              <div class="listing-img-content">
                <span class="listing-price" ng-show="p.prop.web_price">{{ p.price | currency:p.currency:0}}</span>
                <span class="like-icon"></span>
              </div>
              <img src="{{p.cover_photo}}" alt="">
            </a>

            <div class="listing-content">

              <div class="listing-title">
                <h4><a ui-sref="property({propertyId: p.id})">{{p.prop.publication_title}}</a></h4>
                <a ui-sref="property({propertyId: p.id})">
                  <i class="fa fa-map-marker"></i>
                  {{p.prop.address}}
                </a>
                <a ui-sref="property({propertyId: p.id})" class="details button border">Detalles</a>
              </div>

              <ul class="listing-details">
                <li>{{p.area}} M2</li>
                <li><i class="fa fa-bed"></i> <span>{{p.prop.suite_amount}}</span></li>
                <li><i class="fas fa-bath"></i> <span>{{p.prop.bathroom_amount}}</span></li>
                <li><i class="fa fa-car"></i> <span>{{p.parkings}}</span></li>
              </ul>

              <div class="listing-footer">
                <a ui-sref="property({propertyId: p.id})"><i class="fa fa-user"></i> {{p.prop.producer.name}}</a>
              </div>

            </div>
            
          </div>
          <!-- Listing Item End -->

        </div>
        <!-- Similar Listings Container End -->

      </div>
    </div>

    <!-- Units Listing -->
    <div class="row hidden-on-mobile">

      <div class="col-md-12">
        <!-- Similar Listings Container -->
        <h3 class="av-units-title" ng-hide="!development.devPropsReady">Unidades disponibles</h3>

        <!-- Layout Switcher -->
        <div class='spinner' ng-include="'/views/common/spinner.html'" ng-hide="development.devPropsReady"></div>

        <!-- Listing Item -->
        <table class="av-units-table" id="headers" width="100%" ng-hide="!development.devPropsReady">

          <thead>
            <tr>
              <th>Dirección</th>
              <th>Ambientes</th>
              <th>Dormitorios</th>
              <th>Superficie</br>Cubierta</th>
              <th>Superficie</br>Total</th>
              <th>Cochera</th>
              <th>Venta</th>
              <th>Alquiler</th>
            </tr>
          </thead>

          <tbody>
            <tr ng-repeat="p in development.devProps" ui-sref="property({propertyId: p.id})">
              <td>{{ p.prop.fake_address }}</td>
              <td>{{ p.prop.room_amount }}</td>
              <td>{{ p.prop.suite_amount }}</td>
              <td>{{ p.prop.roofed_surface }} m²</td>
              <td>{{ p.area }} m²</td>
              <td>{{ p.parkings_av }}</td>
              <td>{{ p.sell ? (p.sell.price | currency:p.sell.currency:0) : "-" }}</td>
              <td>{{ p.rent ? (p.rent.prices.price | currency:p.rent.currency:0) : "-" }}</td>
            </tr>
          </tbody>

        </table>
        <!-- Listing Item End -->

      </div>
    </div>
    <!-- Units Listing End -->

  </div>

</div>

<!-- Mobile Property Detail -->
<div id="mobile-dev-detail" ng-controller="developmentController as development" class="hidden-on-desktop">
  
  <!-- Skeleton Loader -->
  <section class="skeleton-container" ng-show="!development.apiReady">
    <div class="skeleton-image"></div>
    <div class="skeleton-lines">
      <div ng-repeat="x in [].constructor(2) track by $index" class="skeleton-line"></div>            
    </div>
  </section>
  <!-- Skeleton Loader End -->
  
  <div ng-show="development.apiReady">
    
    <!-- Gallery Slider  -->
    <gallery-single-property ng-if="development.apiReady" item="development.developmentMapped" show-widgets="true" show-gallery="development.apiReady"></gallery-single-property>   
    <!-- Gallery Slider End -->

    <!-- Subtitle -->
    <section class="mobile-property-subtitle">
      <div class="main-subtitle">
        <h2>{{development.d.name}}</h2>
        <span class="property-badge">{{development.d.type.name}}</span>        
      </div>

      <div class="subtitle-address">
        <i class="fa fa-map-marker"></i>
        <p>&nbsp {{development.d.address}}</p>
      </div>
      
      <div class="subtitle-address">
        <p ng-if="development.d.construction_date && development.isDateGraterThanToday(development.d.construction_date)">Posesión: {{development.d.construction_date | date:'MM/yyyy'}}</p>
      </div>
    </section>    
    <!-- Subtitle End -->

    <!-- Description -->
    <section class="mobile-property-description">      
      <h3 class="desc-headline">Descripción</h3>
      <div class="description-detail">
        <pre>{{development.d.description.trim()}}</pre>        
      </div>
      <div class="description-detail-button-container" ng-click="development.toggleDescriptionDetail()">
        <p><i class="fa fa-angle-down"></i></p>
      </div>
    </section>
    <!-- Description End -->

    <hr>
    
    <!-- General Features --> 
    <section class="mobile-dev-general-features">
      <h3 class="desc-headline">Características Generales</h3>
      <ul>
        <li ng-repeat="tag in development.d.tags">{{tag.name}}</li>
      </ul>
      <div class="description-detail-button-container" ng-click="development.toggleGeneralFeatures()" ng-show="development.d.tags.length > development.generalFeaturesToShow">
        <p><i class="fa fa-angle-down"></i></p>
      </div>
    </section>  
    <!-- General Features End -->

    <hr>

    <!-- Location -->
    <section class="mobile-dev-location">    
      <h3 class="desc-headline no-border" id="location">Ubicación</h3>
      <div id="dev-map-container">
        <div id="mobile-dev-map"></div>
      </div> 
    </section>
    <!-- Location End -->
    
    <hr>

    <!-- Available Units -->
    <responsive-table ng-if="development.devProps && development.devProps.length > 0" items="development.devProps" title="'Unidades disponibles'" columns="development.availablePropsColumns"></responsive-table>
    
    <!-- Contact Modal -->
    <contact-globe is-open="development.isContactModalOpen" main-img="development.d.users_in_charge.picture" open-icon="development.contactGlobeOpenIcon" 
      close-icon="development.contactGlobeCloseIcon" title="development.d.users_in_charge.name" actions="development.contactGlobeActions" toggle-modal="development.toggleContactModal()">
    </contact-globe>
    <!-- Contact Modal End -->

    <!-- Featured Props -->
    <section class="mobile-property-featured">  
      <h3>Te aconsejamos est{{development.featuredProps.length == 1 ? 'a' : 'as'}} propiedad{{development.featuredProps.length == 1 ? '' : 'es'}}</h3>    
      
      <gallery-properties-cards items="development.featuredProps" show-photos="development.featuredPropsReady"></gallery-properties-cards>
    </section>
    <!-- Featured Props End -->
  
  </div>

</div>  
<!-- Mobile Property Detail End -->
